/**
 * osf-panel - Smart panels that show and hide bootstrap columns
 * @author Caner Uguz
 * @version v0.3.1
 * @link https://github.com/caneruguz/osf-panel
 * @license Apache 2.0
 */
!function(t){"use strict";t.fn.osfPanel=function(a){var s,n=t.extend({complete:null,sizes:{xs:0,sm:768,md:992,lg:1200},buttonElement:".switch",onClass:"btn-primary",offClass:"btn-default",onSize:"sm",onclick:null},a),l=this,o=["xs","sm","md","lg"],e=n.sizes;return l.updateMode=function(){var a=t(window).width();a>=e.xs&&a<e.sm&&(s="xs"),a>=e.sm&&a<e.md&&(s="sm"),a>=e.md&&a<e.lg&&(s="md"),a>=e.lg&&(s="lg")},l.adjustVisible=function(){var a,n,o,e,i,c,d,f,r,u=t("[data-osf-panel]:visible").length,h=[],m=0,p=0,g=!1;l.each(function(l,o){var e,i=t(o);for(a=i.attr("data-osf-panel-col"),h[l]=a,a&&"none"!==i.css("display")&&(g=!0,m+=parseInt(a,10),p+=1),n=i.attr("class").split(" "),e=0;e<n.length;e+=1)n[e].indexOf("col-"+s+"-")>-1&&n.splice(e,1);i.attr("class",n.join(" "))}),g?(o=12-m,e=u-p,i=Math.floor(o/e),c=!1,l.each(function(a,n){var l=t(n);h[a]?l.addClass("col-"+s+"-"+h[a]):(d=o-i*e,d>0&&!c?(l.addClass("col-"+s+"-"+(i+d)),c=!0):l.addClass("col-"+s+"-"+i))})):(f=12/u,r="col-"+s+"-"+f,l.each(function(a,s){t(s).addClass(r)}))},l.initialize=function(){l.each(function(a,s){var n,l,o=t(s),e=o.attr("class");for(n=e?e.split(" "):[],o.is(":visible")?(o.attr("data-osf-toggle","on"),o.attr("data-initial-state","on")):(o.attr("data-initial-state","off"),o.attr("data-osf-toggle","off")),o.attr("data-css-cache",o.attr("class")),l=0;l<n.length;l+=1)n[l].match(/(col-xs-|col-sm-|col-md-|col-lg)/)&&(n[l]="");o.attr("class",n.join(" "))}),l.createButtons()},l.reset=function(){t("[data-osf-panel]").each(function(a,s){var n=t(s),l=n.attr("data-css-cache"),o=n.attr("data-initial-state");"on"===o?n.show():n.hide(),l&&l.length>0&&n.attr("class",l)})},l.createButtons=function(){l.updateMode();var a,e=t(n.buttonElement);e.html(""),o.indexOf(s)>=o.indexOf(n.onSize)?(e.append('<div class="btn-group btn-group-sm"></div>'),a=t(n.buttonElement+" > .btn-group"),a.append('<div class="btn btn-default disabled">Toggle view: </div>'),l.each(function(s,l){var o=t(l),e=n.offClass,i=o.attr("data-osf-panel"),c=o.attr("data-osf-toggle");"on"===c&&(e=n.onClass,o.show()),"off"===c&&(e=n.offClass,o.hide()),a.append('<div class="btn '+e+'">'+i+"</div>")}),l.adjustVisible()):l.reset()},t(document).on("click",n.buttonElement+" .btn",function(a){var s=t(this),o=s.text();s.hasClass(n.onClass)?(s.removeClass(n.onClass).addClass(n.offClass),t('[data-osf-panel="'+o+'"]').attr("data-osf-toggle","off").hide()):s.hasClass(n.offClass)&&(s.removeClass(n.offClass).addClass(n.onClass),t('[data-osf-panel="'+o+'"]').attr("data-osf-toggle","on").show()),l.adjustVisible(),t.isFunction(n.onclick)&&n.onclick.call(l,o,s,a)}),t(window).resize(function(){l.createButtons()}),l.initialize(),t.isFunction(n.complete)&&n.complete.call(this),this}}(jQuery);