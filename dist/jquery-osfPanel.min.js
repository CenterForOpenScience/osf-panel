/**
 * osf-panel - Smart panels that show and hide bootstrap columns
 * @author Caner Uguz
 * @version v0.0.1
 * @link https://github.com/caneruguz/osf-panel
 * @license Apache 2.0
 */
!function(s){"use strict";s.fn.osfPanel=function(t){var a,n=s.extend({complete:null,sizes:{xs:0,sm:768,md:992,lg:1200},buttonElement:".switch",onClass:"btn-primary",offClass:"btn-default",onSize:"sm",onclick:null},t),l=this,o=["xs","sm","md","lg"],e=n.sizes;return l.updateMode=function(){var t=s(window).width();t>=e.xs&&t<e.sm&&(a="xs"),t>=e.sm&&t<e.md&&(a="sm"),t>=e.md&&t<e.lg&&(a="md"),t>=e.lg&&(a="lg")},l.adjustVisible=function(){var t,n,o,e,i,c,d,f,r,u=s("[data-osf-panel]:visible").length,h=[],m=0,p=0,g=!1;l.each(function(l,o){var e,i=s(o);for(t=i.attr("data-osf-panel-col"),h[l]=t,t&&"none"!==i.css("display")&&(g=!0,m+=parseInt(t,10),p+=1),n=i.attr("class").split(" "),e=0;e<n.length;e+=1)n[e].indexOf("col-"+a+"-")>-1&&n.splice(e,1);i.attr("class",n.join(" "))}),g?(o=12-m,e=u-p,i=Math.floor(o/e),c=!1,l.each(function(t,n){var l=s(n);h[t]?l.addClass("col-"+a+"-"+h[t]):(d=o-i*e,d>0&&!c?(l.addClass("col-"+a+"-"+(i+d)),c=!0):l.addClass("col-"+a+"-"+i))})):(f=12/u,r="col-"+a+"-"+f,l.each(function(t,a){s(a).addClass(r)}))},l.initialize=function(){l.each(function(t,a){var n,l=s(a),o=l.attr("class").split(" ");for(l.is(":visible")&&l.attr("data-osf-toggle","on"),l.attr("data-css-cache",l.attr("class")),n=0;n<o.length;n+=1)o[n].match(/(col-xs-|col-sm-|col-md-|col-lg)/)&&(o[n]="");l.attr("class",o.join(" "))}),l.createButtons()},l.reset=function(){s("[data-osf-panel]").each(function(t,a){var n=s(a),l=n.attr("data-css-cache");n.show(),l&&l.length>0&&n.attr("class",l)})},l.createButtons=function(){l.updateMode();var t,e=s(n.buttonElement);e.html(""),o.indexOf(a)>=o.indexOf(n.onSize)?(e.append('<div class="btn-group btn-group-sm"></div>'),t=s(n.buttonElement+" > .btn-group"),t.append('<div class="btn btn-default disabled">Toggle view: </div>'),l.each(function(a,l){var o=s(l),e=n.offClass,i=o.attr("data-osf-panel"),c=o.attr("data-osf-toggle");"on"===c&&(e=n.onClass,o.show()),"off"===c&&(e=n.offClass,o.hide()),t.append('<div class="btn '+e+'">'+i+"</div>")}),l.adjustVisible()):l.reset()},s(document).on("click",n.buttonElement+" .btn",function(t){var a=s(this),o=a.text();a.hasClass(n.onClass)?(a.removeClass(n.onClass).addClass(n.offClass),s('[data-osf-panel="'+o+'"]').attr("data-osf-toggle","off").hide()):a.hasClass(n.offClass)&&(a.removeClass(n.offClass).addClass(n.onClass),s('[data-osf-panel="'+o+'"]').attr("data-osf-toggle","on").show()),l.adjustVisible(),s.isFunction(n.onclick)&&n.onclick.call(l,o,a,t)}),s(window).resize(function(){l.createButtons()}),l.initialize(),s.isFunction(n.complete)&&n.complete.call(this),this}}(jQuery);