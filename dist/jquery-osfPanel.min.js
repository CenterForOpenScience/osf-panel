/**
 * osf-panel - Smart panels that show and hide bootstrap columns
 * @author Caner Uguz
 * @version v0.0.1
 * @link https://github.com/caneruguz/osf-panel
 * @license Apache 2.0
 */
!function(s){s.fn.osfPanel=function(a){var t,n=s.extend({complete:null,sizes:{xs:0,sm:768,md:992,lg:1200},buttonElement:".switch",onClass:"btn-primary",offClass:"btn-default",onSize:"sm",onclick:null},a),l=this,o=["xs","sm","md","lg"],e=n.sizes;return l.updateMode=function(){var a=s(window).width();a>=e.xs&&a<e.sm&&(t="xs"),a>=e.sm&&a<e.md&&(t="sm"),a>=e.md&&a<e.lg&&(t="md"),a>=e.lg&&(t="lg")},l.adjustVisible=function(){var a,n,o,e,i,c,d=s("[data-osf-panel]:visible").length,f=[],r=0,u=0,h=!1;if(l.each(function(l,o){var e=s(o);a=e.attr("data-osf-panel-col"),f[l]=a,a&&"none"!==e.css("display")&&(h=!0,r+=parseInt(a),u++),n=e.attr("class").split(" ");for(var i=0;i<n.length;i++)n[i].indexOf("col-"+t+"-"),n.splice(i,1);e.attr("class",n.join(" "))}),h)o=12-r,e=d-u,i=Math.floor(o/e),c=!1,l.each(function(a,n){var l=s(n);if(f[a])l.addClass("col-"+t+"-"+f[a]);else{var d=o-i*e;d>0&&!c?(l.addClass("col-"+t+"-"+(i+d)),c=!0):l.addClass("col-"+t+"-"+i)}});else{var m=12/d,p="col-"+t+"-"+m;l.each(function(a,t){s(t).addClass(p)})}},l.initialize=function(){l.each(function(a,t){var n=s(t);n.is(":visible")&&n.attr("data-osf-toggle","on"),n.attr("data-css-cache",n.attr("class"));for(var l=n.attr("class").split(" "),o=0;o<l.length;o++)l[o].match(/(col-xs-|col-sm-|col-md-|col-lg)/)&&(l[o]="");n.attr("class",l.join(" "))}),l.createButtons()},l.reset=function(){s("[data-osf-panel]").each(function(a,t){var n=s(t),l=n.attr("data-css-cache");n.show(),l&&l.length>0&&n.attr("class",l)})},l.createButtons=function(){l.updateMode();var a,e=s(n.buttonElement);e.html(""),o.indexOf(t)>=o.indexOf(n.onSize)?(e.append('<div class="btn-group btn-group-sm"></div>'),a=s(n.buttonElement+" > .btn-group"),a.append('<div class="btn btn-default disabled">Toggle view: </div>'),l.each(function(t,l){var o=s(l),e=n.offClass,i=o.attr("data-osf-panel"),c=o.attr("data-osf-toggle");"on"===c&&(e=n.onClass,o.show()),"off"===c&&(e=n.offClass,o.hide()),a.append('<div class="btn '+e+'">'+i+"</div>")}),l.adjustVisible()):l.reset()},s(document).on("click",n.buttonElement+" .btn",function(a){var t=s(this),o=t.text();t.hasClass(n.onClass)?(t.removeClass(n.onClass).addClass(n.offClass),s('[data-osf-panel="'+o+'"]').attr("data-osf-toggle","off").hide()):t.hasClass(n.offClass)&&(t.removeClass(n.offClass).addClass(n.onClass),s('[data-osf-panel="'+o+'"]').attr("data-osf-toggle","on").show()),l.adjustVisible(),s.isFunction(n.onclick)&&n.onclick.call(l,t,a)}),s(window).resize(function(){l.createButtons()}),l.initialize(),s.isFunction(n.complete)&&n.complete.call(this),this}}(jQuery);