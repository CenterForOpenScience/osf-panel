/**
 * osf-panel - Smart panels that show and hide bootstrap columns
 * @author Caner Uguz
 * @version v0.0.1
 * @link https://github.com/caneruguz/osf-panel
 * @license Apache 2.0
 */
!function(s){s.fn.osfPanel=function(a){var t,e=s.extend({complete:null,sizes:{xs:0,sm:768,md:992,lg:1200},buttonElement:".switch",onClass:"btn-primary",offClass:"btn-default",onSize:"sm"},a),n=this,l=["xs","sm","md","lg"],o=e.sizes;return n.updateMode=function(){var a=s(window).width();a>=o.xs&&a<o.sm&&(t="xs"),a>=o.sm&&a<o.md&&(t="sm"),a>=o.md&&a<o.lg&&(t="md"),a>=o.lg&&(t="lg")},n.adjustVisible=function(){var a,e,l,o,i,c,d=s("[data-osf-panel]:visible").length,f=[],r=0,u=0,h=!1;if(n.each(function(n,l){var o=s(l);a=o.attr("data-osf-panel-col"),f[n]=a,a&&"none"!==o.css("display")&&(h=!0,r+=parseInt(a),u++),e=o.attr("class").split(" ");for(var i=0;i<e.length;i++)e[i].indexOf("col-"+t+"-"),e.splice(i,1);o.attr("class",e.join(" "))}),h)l=12-r,o=d-u,i=Math.floor(l/o),c=!1,n.each(function(a,e){var n=s(e);if(f[a])n.addClass("col-"+t+"-"+f[a]);else{var d=l-i*o;d>0&&!c?(n.addClass("col-"+t+"-"+(i+d)),c=!0):n.addClass("col-"+t+"-"+i)}});else{var m=12/d,p="col-"+t+"-"+m;n.each(function(a,t){s(t).addClass(p)})}},n.initialize=function(){n.each(function(a,t){var e=s(t);e.is(":visible")&&e.attr("data-osf-toggle","on"),e.attr("data-css-cache",e.attr("class"));for(var n=e.attr("class").split(" "),l=0;l<n.length;l++)n[l].match(/(col-xs-|col-sm-|col-md-|col-lg)/)&&(n[l]="");e.attr("class",n.join(" "))}),n.createButtons()},n.reset=function(){s("[data-osf-panel]").each(function(a,t){var e=s(t),n=e.attr("data-css-cache");e.show(),n&&n.length>0&&e.attr("class",n)})},n.createButtons=function(){n.updateMode();var a,o=s(e.buttonElement);o.html(""),l.indexOf(t)>=l.indexOf(e.onSize)?(o.append('<div class="btn-group btn-group-sm"></div>'),a=s(e.buttonElement+" > .btn-group"),a.append('<div class="btn btn-default disabled">Toggle view: </div>'),n.each(function(t,n){var l=s(n),o=e.offClass,i=l.attr("data-osf-panel"),c=l.attr("data-osf-toggle");"on"===c&&(o=e.onClass,l.show()),"off"===c&&(o=e.offClass,l.hide()),a.append('<div class="btn '+o+'">'+i+"</div>")}),n.adjustVisible()):n.reset()},s(document).on("click",e.buttonElement+" .btn",function(){var a=s(this),t=a.text();a.hasClass(e.onClass)?(a.removeClass(e.onClass).addClass(e.offClass),s('[data-osf-panel="'+t+'"]').attr("data-osf-toggle","off").hide()):a.hasClass(e.offClass)&&(a.removeClass(e.offClass).addClass(e.onClass),s('[data-osf-panel="'+t+'"]').attr("data-osf-toggle","on").show()),n.adjustVisible()}),s(window).resize(function(){n.createButtons()}),n.initialize(),s.isFunction(e.complete)&&e.complete.call(this),this}}(jQuery);