/**
 * osf-panel - Smart panels that show and hide bootstrap columns
 * @author Caner Uguz
 * @version v0.3.1
 * @link https://github.com/caneruguz/osf-panel
 * @license Apache 2.0
 */
!function(t){"use strict";t.fn.osfPanel=function(a){var s,n=t.extend({complete:null,sizes:{xs:0,sm:768,md:992,lg:1200},buttonElement:".switch",onClass:"btn-primary",offClass:"btn-default",onSize:"sm",onclick:null},a),o=this,l=["xs","sm","md","lg"],e=n.sizes;return o.updateMode=function(){var a=t(window).width();a>=e.xs&&a<e.sm&&(s="xs"),a>=e.sm&&a<e.md&&(s="sm"),a>=e.md&&a<e.lg&&(s="md"),a>=e.lg&&(s="lg")},o.adjustVisible=function(){var a,n,l,e,i,c,d,f,r,u=t("[data-osf-panel]:visible").length,h=[],g=0,m=0,p=!1;o.each(function(o,l){var e,i=t(l);for(a=i.attr("data-osf-panel-col"),h[o]=a,a&&"none"!==i.css("display")&&(p=!0,g+=parseInt(a,10),m+=1),n=i.attr("class").split(" "),e=0;e<n.length;e+=1)n[e].indexOf("col-"+s+"-")>-1&&n.splice(e,1);i.attr("class",n.join(" "))}),"xs"===s?o.each(function(a,s){t(s).addClass("col-xs-12")}):p?(l=12-g,e=u-m,i=Math.floor(l/e),c=!1,o.each(function(a,n){var o=t(n);h[a]?o.addClass("col-"+s+"-"+h[a]):(d=l-i*e,d>0&&!c?(o.addClass("col-"+s+"-"+(i+d)),c=!0):o.addClass("col-"+s+"-"+i))})):(f=12/u,r="col-"+s+"-"+f,o.each(function(a,s){t(s).addClass(r)}))},o.initialize=function(){o.each(function(a,s){var n,o,l=t(s),e=l.attr("class");for(n=e?e.split(" "):[],l.is(":visible")?(l.attr("data-osf-toggle","on"),l.attr("data-initial-state","on")):(l.attr("data-initial-state","off"),l.attr("data-osf-toggle","off")),l.attr("data-css-cache",l.attr("class")),o=0;o<n.length;o+=1)n[o].match(/(col-xs-|col-sm-|col-md-|col-lg)/)&&(n[o]="");l.attr("class",n.join(" "))}),o.createButtons()},o.reset=function(){t("[data-osf-panel]").each(function(a,s){var n=t(s),o=n.attr("data-css-cache"),l=n.attr("data-initial-state");"on"===l?n.show():n.hide(),o&&o.length>0&&n.attr("class",o)})},o.createButtons=function(){o.updateMode();var a,e=t(n.buttonElement);e.html(""),l.indexOf(s)>=l.indexOf(n.onSize)?(e.append('<div class="btn-group btn-group-sm"></div>'),a=t(n.buttonElement+" > .btn-group"),a.append('<div class="btn btn-default disabled">Toggle view: </div>'),o.each(function(s,o){var l=t(o),e=n.offClass,i=l.attr("data-osf-panel"),c=l.attr("data-osf-toggle");"on"===c&&(e=n.onClass,l.show()),"off"===c&&(e=n.offClass,l.hide()),a.append('<div class="btn '+e+'">'+i+"</div>")}),o.adjustVisible()):o.reset()},t(document).on("click",n.buttonElement+" .btn",function(a){var s,l=t(this),e=l.text(),i=t('[data-osf-panel="'+e+'"]');l.hasClass(n.onClass)?(l.removeClass(n.onClass).addClass(n.offClass),i.attr("data-osf-toggle","off").hide()):l.hasClass(n.offClass)&&(l.removeClass(n.offClass).addClass(n.onClass),i.attr("data-osf-toggle","on").show()),o.adjustVisible(),s="on"===i.attr("data-osf-toggle")?!0:!1,t.isFunction(n.onclick)&&n.onclick(a,e,s,l,i)}),t(window).resize(function(){o.createButtons()}),o.initialize(),t.isFunction(n.complete)&&n.complete.call(this),this}}(jQuery);